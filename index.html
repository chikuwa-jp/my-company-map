<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬ã®ä¸»è¦ä¼æ¥­ æ‰€åœ¨åœ°Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #map { height: 100vh; width: 100%; }
        .leaflet-popup-content-wrapper { border-radius: 12px; }
        .map-title {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            pointer-events: none;
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body>
    <div class="map-title text-xl font-bold text-gray-800 shadow-sm">
        ğŸ¢ æ—¥æœ¬ã®ä¸»è¦ä¼æ¥­ æ‰€åœ¨åœ°Map
    </div>
    
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // åœ°å›³ã®åˆæœŸåŒ–
        const map = L.map('map').setView([36.2048, 138.2529], 5);
        
        // å›½åœŸåœ°ç†é™¢ã®æ¨™æº–åœ°å›³ã‚¿ã‚¤ãƒ«ã‚’ä½¿ç”¨
        L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://maps.gsi.go.jp/development/ichiran.html">å›½åœŸåœ°ç†é™¢</a>'
        }).addTo(map);

        async function loadData() {
            try {
                // åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ locations.json ã‚’èª­ã¿è¾¼ã‚€
                const response = await fetch('locations.json');
                const data = await response.json();
                
                data.forEach(item => {
                    // ç·¯åº¦çµŒåº¦ãŒã‚ã‚‹å ´åˆã®ã¿ãƒãƒ¼ã‚«ãƒ¼ã‚’è¨­ç½®
                    if (item.lat && item.lng) {
                        const marker = L.marker([item.lat, item.lng]).addTo(map);
                        marker.bindPopup(`
                            <div class="p-1">
                                <div class="text-xs font-bold text-indigo-500 mb-1">${item.sector || 'ä¼æ¥­æ‹ ç‚¹'}</div>
                                <h3 class="font-bold text-gray-800 text-base">${item.name}</h3>
                                <p class="text-sm text-gray-600 mt-1">${item.address}</p>
                                <div class="mt-2 text-right border-t pt-2">
                                    <a href="https://www.google.com/maps/search/${encodeURIComponent(item.address)}" 
                                       target="_blank" 
                                       class="text-xs text-blue-600 hover:text-blue-800 font-medium">Google Mapã§è¦‹ã‚‹ â†’</a>
                                </div>
                            </div>
                        `);
                    }
                });
            } catch (e) {
                console.error("ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚locations.jsonãŒåŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚", e);
            }
        }
        loadData();
    </script>
</body>
</html>